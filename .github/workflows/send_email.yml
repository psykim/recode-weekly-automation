name: ì´ë©”ì¼ ë°œì†¡ (ì„ íƒí•œ ë³´ê³ ì„œ)

on:
  workflow_dispatch:
    inputs:
      report_filename:
        description: 'ë°œì†¡í•  ë³´ê³ ì„œ íŒŒì¼ëª… (ì˜ˆ: recode_weekly_20250721_050256.html)'
        required: true
        type: string

permissions:
  contents: read

jobs:
  send-email:
    runs-on: ubuntu-latest
    
    steps:
    - name: ì €ì¥ì†Œ ì²´í¬ì•„ì›ƒ
      uses: actions/checkout@v3
      
    - name: Python ì„¤ì •
      uses: actions/setup-python@v4
      with:
        python-version: '3.9'
        
    - name: ì¢…ì†ì„± ì„¤ì¹˜
      run: |
        python -m pip install --upgrade pip
        pip install -r requirements.txt
        
    - name: ì„ íƒí•œ ë³´ê³ ì„œ ë°œì†¡
      env:
        SMTP_USERNAME: ${{ secrets.SMTP_USERNAME }}
        SMTP_PASSWORD: ${{ secrets.SMTP_PASSWORD }}
        SENDER_EMAIL: ${{ secrets.SENDER_EMAIL }}
        SENDER_NAME: ${{ secrets.SENDER_NAME }}
        REPORT_FILENAME: ${{ github.event.inputs.report_filename }}
      run: |
        cd scripts
        python send_email_selected.py
        
    - name: ì™„ë£Œ ë©”ì‹œì§€
      run: |
        echo "âœ… ì„ íƒí•œ ë³´ê³ ì„œê°€ ì„±ê³µì ìœ¼ë¡œ ë°œì†¡ë˜ì—ˆìŠµë‹ˆë‹¤!"
        echo "ğŸ“§ ë³´ê³ ì„œ: ${{ github.event.inputs.report_filename }}"
        echo "ğŸ“Š ì´ë©”ì¼ì´ ë“±ë¡ëœ ìˆ˜ì‹ ìë“¤ì—ê²Œ ë°œì†¡ë˜ì—ˆìŠµë‹ˆë‹¤!"
